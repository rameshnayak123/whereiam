<!-- right_sidebar.html -->
<div class="card right-sidebar">
    <div class="card-body">
        <h3 class="card-title">URL Preview</h3>
        <form id="urlForm" class="mb-3">
            <div class="input-group">
                <input type="text" class="form-control" id="urlInput" placeholder="Enter URL">
                <div class="input-group-append">
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </div>
        </form>
        <div id="previewContainer" class="mt-3">
            <!-- Preview will appear here -->
        </div>
        <div class="mt-3">
            <button id="copyButton" class="btn btn-success">Copy Iframe Code</button>
        </div>
        <textarea class="form-control d-none" id="iframeCode" rows="3" readonly></textarea>
    </div>
</div>

<script>
    document.getElementById('urlForm').addEventListener('submit', function(event) {
        event.preventDefault();
        var url = document.getElementById('urlInput').value;
        var iframe = document.createElement('iframe');
        iframe.src = url;
        iframe.style.width = '100%';
        iframe.style.height = '300px'; // Default height
        iframe.style.border = 'none';
        document.getElementById('previewContainer').innerHTML = '';
        document.getElementById('previewContainer').appendChild(iframe);

        // Dynamically adjust iframe height based on content
        iframe.onload = function() {
            var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
            iframe.style.height = innerDoc.body.scrollHeight + 'px';
        };

        var iframeCode = '<iframe src="' + url + '" width="100%" height="300px" frameborder="0" allowfullscreen></iframe>';
        document.getElementById('iframeCode').value = iframeCode;
    });

    document.getElementById('copyButton').addEventListener('click', function() {
        var iframeCode = document.getElementById('iframeCode').value;
        var tempTextArea = document.createElement('textarea');
        tempTextArea.value = iframeCode;
        tempTextArea.style.position = 'fixed';  // Ensure it's out of the viewport
        document.body.appendChild(tempTextArea);
        tempTextArea.select();
        document.execCommand('copy');
        document.body.removeChild(tempTextArea);
        alert('Iframe code copied to clipboard!');
    });
</script>
